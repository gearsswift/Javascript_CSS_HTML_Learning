<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TicTacToe</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>TicTacToe</h1>
    </header>
    <main>
        <div id="board">
            <div class="board_piece" id="place1"></div>
            <div class="board_piece" id="place2"></div>
            <div class="board_piece" id="place3"></div>
            <div class="board_piece" id="place4"></div>
            <div class="board_piece" id="place5"></div>
            <div class="board_piece" id="place6"></div>
            <div class="board_piece" id="place7"></div>
            <div class="board_piece" id="place8"></div>
            <div class="board_piece" id="place9"></div>
        </div>
        <div >
            <h1 class="whoplays">BLUE TURN</h1>
        </div>
    </main>
    <footer>
        <h1 class="winner">WINNER</h1>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
    <script >
        $(document).ready(function(){
    console.log("JQuery Loaded")
    let arr = [
        [$("#place1"),$("#place2"),$("#place3")],
        [$("#place4"),$("#place5"),$("#place6")],
        [$("#place7"),$("#place8"),$("#place9")]
    ]
    let winner = "";
    function IsXWinner(){
        return (arr[0][0].hasClass("X") && arr[0][1].hasClass("X") && arr[0][2].hasClass("X")) || 
        (arr[1][0].hasClass("X") && arr[1][1].hasClass("X") && arr[1][2].hasClass("X")) ||
        (arr[2][0].hasClass("X") && arr[2][1].hasClass("X") && arr[2][2].hasClass("X")) ||
        (arr[0][0].hasClass("X") && arr[1][0].hasClass("X") && arr[2][0].hasClass("X")) ||
        (arr[0][1].hasClass("X") && arr[1][1].hasClass("X") && arr[2][1].hasClass("X")) ||
        (arr[0][2].hasClass("X") && arr[1][2].hasClass("X") && arr[2][2].hasClass("X")) ||
        (arr[0][0].hasClass("X") && arr[1][1].hasClass("X") && arr[2][2].hasClass("X")) ||
        (arr[0][2].hasClass("X") && arr[1][1].hasClass("X") && arr[2][0].hasClass("X")) 
    }

    function IsYWinner(){
        return (arr[0][0].hasClass("Y") && arr[0][1].hasClass("Y") && arr[0][2].hasClass("Y")) || 
        (arr[1][0].hasClass("Y") && arr[1][1].hasClass("Y") && arr[1][2].hasClass("Y")) ||
        (arr[2][0].hasClass("Y") && arr[2][1].hasClass("Y") && arr[2][2].hasClass("Y")) ||
        (arr[0][0].hasClass("Y") && arr[1][0].hasClass("Y") && arr[2][0].hasClass("Y")) ||
        (arr[0][1].hasClass("Y") && arr[1][1].hasClass("Y") && arr[2][1].hasClass("Y")) ||
        (arr[0][2].hasClass("Y") && arr[1][2].hasClass("Y") && arr[2][2].hasClass("Y")) ||
        (arr[0][0].hasClass("Y") && arr[1][1].hasClass("Y") && arr[2][2].hasClass("Y")) ||
        (arr[0][2].hasClass("Y") && arr[1][1].hasClass("Y") && arr[2][0].hasClass("Y")) 
    }

    let countY = 0;
    let countX = 0;
    let totalTurns = 0
    const whoturn = $(".whoplays")
    

    $(".board_piece").on("click",function(){
        if(winner != "")
        {
            location.reload(true);
        }
        if(countX == 0)
        {
            totalTurns++
            countX++
            console.log("X")
            $(this).addClass("X");
            whoturn.text("YELLOW TURN")
            return
        }
        if($(this).hasClass("X") ||$(this).hasClass("Y"))
        {
            return;
        }
        if(countX > countY)
        {
            totalTurns++
            countY++
            console.log("Y")
            $(this).addClass("Y");
            if(countY >= 3)
            {
                if(IsYWinner())
                {
                    $(".winner").text("YELLOW WINS")
                    winner ="Y"
                    return
                }
                if(totalTurns > 8)
                {
                    winner = "UNDECIDED";
                    $(".winner").text("MATCH IS SQUASHED")
                    return
                }
            }
            whoturn.html("BLUE TURN")
            return
        }
        else{
            totalTurns++
            countX++
            console.log("X")
            $(this).addClass("X");
            if(countX >= 3)
            {
                if(IsXWinner())
                {
                    $(".winner").text("BLUE WINS")
                    winner ="X"
                    return
                }
                if(totalTurns > 8)
                {
                    winner = "UNDECIDED";
                    $(".winner").text("MATCH IS SQUASHED")
                    return
                }
            }
            whoturn.text("YELLOW TURN")
            return
        }
        
    })
})
    </script>
</body>
</html>